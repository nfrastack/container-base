name: "MANUAL - Build all images"

on:
  workflow_dispatch:
    inputs:
      Manual Build:
        description: 'Manual Build'
        required: false

jobs:
  prepare:
    uses: nfrastack/gha/.github/workflows/artifacts_encrypt.yml@main
    secrets: inherit
  alpine:
    needs: prepare
    uses: ./.github/workflows/distro_alpine.yml
    secrets: inherit
  debian:
    needs: prepare
    uses: ./.github/workflows/distro_debian.yml
    secrets: inherit
  cleanup:
    needs: [alpine, debian]
    uses: nfrastack/gha/.github/workflows/artifacts_remove.yml@main
    secrets: inherit
