# SPDX-FileCopyrightText: Â© 2025 Nfrastack <code@nfrastack.com>
#
# SPDX-License-Identifier: MIT

if [ "${CONTAINER_LOG_LEVEL,,}" = "trace" ] ; then
    set +x
fi

export NFRASTACK_MODE="init"

for init_function in /container/base/functions/container/init.d/* ; do
    if [ ! -d "${init_function}" ]; then
        if [[ ! "${init_function}" == *"/container/base/"* ]]; then
            output_on
        fi
        source "${init_function}"
        output_off
    fi
done

source /container/base/defaults/container
